<div class="px-4 md:px-8">
  {% render 'breadcrumb', breadcrumb: page.breadcrumb, page: page %}
</div>

<main class="p-4 md:p-8 bg-slate-100">
  <div class="flex flex-col min-h-screen lg:flex-row">
    <div class="flex flex-col flex-1 px-4 py-4 overflow-hidden lg:py-8 lg:px-6 xl:px-8 ">
      <div x-data="{ device: 'desktop' }">
        <div class="w-full mx-auto max-w-screen-2xl">
          <div class="flex items-center justify-between mb-6">
            <div class="leading-tight">
              <h1 class="text-xl font-bold tracking-tight text-gray-700">{{ page.link_text }}</h1>
            </div>
            <nav class="hidden overflow-hidden text-gray-700 bg-white border border-gray-200 rounded-lg md:flex">
              <button
                class="hidden px-5 py-3 font-semibold md:block focus:bg-green-500 focus:text-white focus:outline-none"
                @click="$dispatch('resize', {device: 'mobile'}) ">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                </svg>
              </button>
              <button
                class="hidden px-5 py-3 font-semibold md:block focus:bg-green-500 focus:text-white focus:outline-none"
                @click="$dispatch('resize', {device: 'tablet'}) ">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 18h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                </svg>
              </button>
              <button
                class="hidden px-5 py-3 font-semibold lg:block focus:bg-green-500 focus:text-white focus:outline-none"
                @click="$dispatch('resize', {device: 'desktop'}) ">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                  </path>
                </svg>
              </button>
            </nav>
          </div>

          {% render "page_preview", page: page %}

          <div x-data="noticesHandler()"
            class="fixed inset-0 flex flex-col-reverse items-end justify-start w-screen h-screen"
            @notice.window="add($event.detail)" style="pointer-events:none">
            <template x-for="notice of notices" :key="notice.id">
              <div x-show="visible.includes(notice)" x-transition:enter="transition ease-in duration-200"
                x-transition:enter-start="transform opacity-0 translate-y-2"
                x-transition:enter-end="transform opacity-100" x-transition:leave="transition ease-out duration-500"
                x-transition:leave-start="transform translate-x-0 opacity-100"
                x-transition:leave-end="transform translate-x-full opacity-0" @click="remove(notice.id)"
                class="flex items-center justify-center h-12 px-3 mb-12 mr-6 text-sm font-semibold text-white uppercase rounded shadow-lg cursor-pointer md:mb-4 lg:px-4"
                :class="{
                'bg-green-500': notice.type === 'success',
                'bg-blue-600': notice.type === 'info',
                'bg-orange-500': notice.type === 'warning',
                'bg-red-500': notice.type === 'error',
              }" style="pointer-events:all" x-text="notice.text">
              </div>
            </template>
          </div>

        </div>
      </div>
    </div>
  </div>
</main>

{% schema %}
  {
    "name": "Web整页页面模板",
    "description": "常规页面模板",
    "sub_page_templates": ["code"],
    "thumb_url": "images/theme/page.png",
    "settings": [
      {
        "id": "title",
        "type": "text",
        "placeholder": "",
        "label": "标题",
        "required": true,
        "info": "显示在正文上方的文章标题"
      },
      {
        "id": "tags",
        "type": "tag_picker",
        "multiple": true,
        "label": "标签"
      },
      {
        "id": "thumb_image_url",
        "type": "image_picker",
        "ratio": "6:4",
        "width": 960,
        "label": "封面图（Block 组件不需要预览图）"
      }
    ]
  }
{% endschema %}
